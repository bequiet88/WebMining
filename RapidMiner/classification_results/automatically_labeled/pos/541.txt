West Ham took the lead against the run of play when Mohamed Diame beat Vito Mannone with a curling shot.